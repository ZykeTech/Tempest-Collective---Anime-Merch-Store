<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login | Tempest Collective</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/login.css">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
</head>
<body>

    <div id="page-loader" class="loader-overlay">
        <div class="loader"></div>
    </div>

    <header class="navbar" style="position: absolute; top: 0; width: 100%; background: linear-gradient(90deg, #8da7fcf5, #5517ff);">
        <h1 class="logo">
            <img src="assets/img/slime.png" class="slime-icon" alt="Slime Icon" style="width:50px; margin-right:10px;">
            Tempest Collective
        </h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="shop.html">Products</a>
        </nav>
    </header>

    <div class="container" id="container">
        
        <div class="form-box login">
            <form id="login-form">
                <h1>Login</h1>
                <div class="input-box">
                    <input type="text" id="login-username" placeholder="Username" required />
                    <i class="bx bxs-user"></i>
                </div>
                <div class="input-box">
                    <input type="password" id="login-pass" placeholder="Password" required />
                    <i class="bx bxs-hide" id="login-eye" style="cursor: pointer;"></i>
                </div>
                <div class="forgot-link">
                    <a href="#">Forgot Password?</a>
                </div>
                <button type="submit" class="btn">Login</button>
                <p>or login with social platforms</p>
                <div class="social-icons">
                    <a href="#"><i class="bx bxl-google"></i></a>
                    <a href="#"><i class="bx bxl-discord"></i></a>
                    <a href="#"><i class="bx bxl-github"></i></a>
                </div>
            </form>
        </div>

        <div class="form-box register">
            <form id="register-form">
                <h1>Registration</h1>
                <div class="input-box">
                    <input type="text" id="reg-username" placeholder="Username" required />
                    <i class="bx bxs-user"></i>
                </div>
                <div class="input-box">
                    <input type="email" placeholder="Email" required />
                    <i class="bx bxs-envelope"></i>
                </div>
                <div class="input-box">
                    <input type="password" id="reg-pass" placeholder="Password" required />
                    <i class="bx bxs-hide" id="reg-eye" style="cursor: pointer;"></i>
                </div>
                <button type="submit" class="btn">Register</button>
                <p>or register with social platforms</p>
                <div class="social-icons">
                    <a href="#"><i class="bx bxl-google"></i></a>
                    <a href="#"><i class="bx bxl-discord"></i></a>
                    <a href="#"><i class="bx bxl-github"></i></a>
                </div>
            </form>
        </div>

        <div class="toggle-box">
            <div class="toggle-panel toggle-left">
                <h1>Hello, Welcome!</h1>
                <p>Don't have an account?</p>
                <button class="btn register-btn" id="register-btn">Register</button>
            </div>
            <div class="toggle-panel toggle-right">
                <h1>Already a Member?</h1>
                <p>Enter your details to access your dashboard.</p>
                <button class="btn login-btn" id="login-btn">Login</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const container = document.getElementById('container');
            const registerBtn = document.getElementById('register-btn');
            const loginBtn = document.getElementById('login-btn');

            // sliding logic
            registerBtn.addEventListener('click', () => { container.classList.add('active'); });
            loginBtn.addEventListener('click', () => { container.classList.remove('active'); });

            const urlParams = new URLSearchParams(window.location.search);
            if(urlParams.get('mode') === 'signup') { container.classList.add('active'); }

            // login logic
            const logForm = document.getElementById('login-form');
            logForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const user = document.getElementById('login-username').value;
                localStorage.setItem('tempestUser', user);
                window.location.href = 'index.html';
            });

            // register logic
            const regForm = document.getElementById('register-form');
            regForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const user = document.getElementById('reg-username').value;
                localStorage.setItem('tempestUser', user);
                window.location.href = 'index.html';
            });

            // password logic
            const loginPass = document.getElementById('login-pass');
            const loginEye = document.getElementById('login-eye');
            
            loginEye.addEventListener('click', () => {
                if(loginPass.type === "password"){
                    loginPass.type = "text";
                    loginEye.classList.replace("bxs-hide", "bxs-show");
                } else {
                    loginPass.type = "password";
                    loginEye.classList.replace("bxs-show", "bxs-hide");
                }
            });

            const regPass = document.getElementById('reg-pass');
            const regEye = document.getElementById('reg-eye');

            regEye.addEventListener('click', () => {
                if(regPass.type === "password"){
                    regPass.type = "text";
                    regEye.classList.replace("bxs-hide", "bxs-show");
                } else {
                    regPass.type = "password";
                    regEye.classList.replace("bxs-show", "bxs-hide");
                }
            });

            // loader logic
            const loader = document.getElementById('page-loader');
            const links = document.querySelectorAll('a');
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    const target = this.getAttribute('href');
                    if (target && !target.startsWith('#') && !target.startsWith('?')) {
                        e.preventDefault(); 
                        loader.classList.add('active');
                        setTimeout(() => { window.location.href = target; }, 2000);
                    }
                });
            });
        });
    </script>
</body>
</html>